import{j as e,L as u,D as g,a as f,T as v,S as N}from"./DaysSvg.q4u5PA_H.js";import{r as j}from"./index.068npczX.js";function y(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-settings",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),e.jsx("path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"})]})}function b(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-logout",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),e.jsx("path",{d:"M9 12h12l-3 -3"}),e.jsx("path",{d:"M18 15l3 -3"})]})}function C({title:r,location:l,type:c,stage:o,date:d,days:h,shouldUpdate:m}){const x=r.toLowerCase().replace(" ","-");return e.jsxs("section",{className:"zone",children:[e.jsx("div",{className:"img",children:e.jsx("img",{src:"/tomato.png",alt:""})}),e.jsxs("div",{className:"info",children:[e.jsx("p",{className:"status active",children:"Offline"}),e.jsx("h3",{children:r}),e.jsxs("div",{className:"section location",children:[e.jsx(u,{}),e.jsx("h4",{children:l})]}),e.jsxs("div",{className:"section date",children:[e.jsx(g,{}),e.jsxs("h4",{children:[e.jsx("span",{children:"Inicio:"})," ",d]})]}),e.jsxs("div",{className:"section days",children:[e.jsx(f,{}),e.jsxs("h4",{children:[e.jsx("span",{children:"Edad: "})," ",h," días"]})]}),e.jsxs("div",{className:"section type",children:[e.jsx(v,{}),e.jsxs("h4",{children:[e.jsx("span",{children:"Variedad:"})," ",c]})]}),e.jsxs("div",{className:"section stage",children:[e.jsx(N,{}),e.jsxs("h4",{children:[e.jsx("span",{children:"Etapa:"})," ",o]})]}),e.jsx("a",{href:`dashboard/${x}`,className:"link",children:"Panel de control"})]})]})}function I(){const[r,l]=j.useState([]);j.useEffect(()=>{(()=>{c().then(t=>{l(t)})})()},[]);const c=()=>fetch("http://localhost:8000/api/getCrops",{method:"POST"}).then(s=>s.json()),o=()=>{localStorage.clear()},d=()=>{document.querySelector(".formAdd").style.display="flex"},h=()=>{document.querySelector(".formAdd").style.display="none"},m=s=>{s.preventDefault();const t=document.querySelector(".form");let i=new FormData(t);i.append("email",localStorage.getItem("email")),i.append("password",localStorage.getItem("password")),fetch("http://localhost:8000/api/addCrop",{method:"POST",body:i}).then(a=>a.json()).then(a=>{if(a.message==="created")t.submit();else{const n=document.querySelector(".falseValidation");n.style.display="flex",a.message==="id_not_exists"?n.innerHTML="⚠️ ID inválido":a.message==="already_exists"?n.innerHTML="⚠️ El ID ya ha sido registrado":n.innerHTML=a.message}})},x=s=>{const i=s.split(" ")[0],[a,n,p]=i.split("-");return`${p}-${n}-${a}`};return e.jsxs("section",{children:[e.jsx("div",{className:"formAdd",children:e.jsxs("form",{action:"/dashboard",className:"form",method:"post",onSubmit:m,children:[e.jsx("span",{className:"close",onClick:h,children:"×"}),e.jsx("label",{htmlFor:"id_device",children:"ID de dispositivo"}),e.jsx("input",{type:"text",id:"id_device",name:"id_device",autoComplete:"off"}),e.jsx("label",{htmlFor:"namePanel",children:"Nombre del cultivo"}),e.jsx("input",{type:"text",id:"namePanel",name:"name",autoComplete:"off"}),e.jsx("label",{htmlFor:"directionPanel",name:"direction",children:"Dirección"}),e.jsx("input",{type:"text",id:"directionPanel",name:"location",autoComplete:"off"}),e.jsx("label",{htmlFor:"type",children:"Variedad o tipo de cultivo"}),e.jsx("select",{name:"type",id:"type",children:e.jsx("option",{value:"lechuga",children:"Lechuga"})}),e.jsx("label",{htmlFor:"irrigation",children:"Método de riego"}),e.jsx("select",{id:"irrigation",name:"irrigation",children:e.jsx("option",{value:"bomba_agua",children:"Bomba de agua"})}),e.jsx("div",{className:"falseValidation"}),e.jsx("input",{type:"submit",value:"Añadir"})]})}),e.jsxs("header",{className:"mainHeader",children:[e.jsxs("div",{className:"headerFirst",children:[e.jsxs("div",{className:"titles",children:[e.jsx("h1",{children:"Panel General"}),e.jsx("h2",{children:"Nombre de usuario"})]}),e.jsxs("section",{className:"articlesContainer",children:[e.jsxs("article",{className:"articlesHeader",children:[e.jsx("div",{className:"articlesImg",children:e.jsx("img",{src:"/fertilizante.png",alt:""})}),e.jsxs("div",{className:"articlesInfo",children:[e.jsx("h2",{children:"Comprar productos"}),e.jsx("a",{href:"/productos",children:e.jsx("button",{children:"Acceder"})})]})]}),e.jsxs("article",{className:"articlesHeader",children:[e.jsx("div",{className:"articlesImg",children:e.jsx("img",{src:"/jardinero.png",alt:""})}),e.jsxs("div",{className:"articlesInfo",children:[e.jsx("h2",{children:"Vinculación (Comercio)"}),e.jsx("a",{href:"productos",children:e.jsx("button",{children:"Acceder"})})]})]}),e.jsxs("article",{className:"articlesHeader",children:[e.jsx("div",{className:"articlesImg",children:e.jsx("img",{src:"/smart-farm.png",alt:""})}),e.jsxs("div",{className:"articlesInfo",children:[e.jsx("h2",{children:"Recomendaciones"}),e.jsx("a",{href:"productos",children:e.jsx("button",{children:"Acceder"})})]})]})]})]}),e.jsxs("div",{className:"icons",children:[e.jsx("a",{href:"",children:e.jsx(y,{})}),e.jsx("a",{href:"/login",onClick:o,children:e.jsx(b,{})})]})]}),e.jsx("button",{className:"buttonAdd",onClick:d,children:"Añadir +"}),e.jsx("main",{className:"crops",children:r.map((s,t)=>e.jsx(C,{title:s.name,location:s.location,type:s.type,days:s.days,stage:s.stage,date:x(s.crop_verified_at)},t))})]})}export{I as Control};
